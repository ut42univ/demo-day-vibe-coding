# ☀️ One-Click Weather — 地図で確認する今日の天気

地図上の任意の地点をクリック、または地名で検索して「今日の天気予報（最高/最低気温・降水量・天気）」をサッと確認できるミニマルなフロントエンドアプリです。Leaflet（OpenStreetMap）で地図を表示し、Open‑Meteo API から天気データを取得します。サーバー不要・API キー不要で動作します。

> デモの起動方法は「セットアップと起動」を参照してください（macOS/zsh 想定）。

---

## 機能概要

- 地図クリック/タップで地点を選択し、当日の天気サマリーを表示
- 検索ボックスから地名を検索して移動（Nominatim を利用）
- 「現在地」ボタンで現在地へ移動（ブラウザ Geolocation）
- レスポンシブレイアウト（スマホ対応）

---

## セットアップと起動

Geolocation は HTTPS もしくは localhost でのみ動作します。ローカルサーバーを使って `/app/` ディレクトリを開いてください。

1. Python の簡易サーバー（推奨）

```bash
python3 -m http.server 5500
# ブラウザで http://localhost:5500/app/ を開く
```

2. Node.js がある場合の代替（任意）

```bash
npx serve -l 5500
# ブラウザで http://localhost:5500/app/ を開く
```

> ルート直下に `index.html` はありません。必ず `/app/` を開いてください。

---

## 使い方

1. 地図をクリック（またはタップ）して地点を選びます
2. 右下の情報パネルに、日付/地点名/緯度経度/最高・最低気温/降水量/天気が表示されます
3. 左上の「現在地」ボタンで現在地へ移動（許可が必要）
4. 検索ボックスに地名を入力し、検索するとその場所へ移動して天気を表示

---

## ディレクトリ構成

```
app/
	index.html     # エントリ HTML（Leaflet 読み込み、UI）
	app.js         # 地図初期化・API 呼び出し・描画
	styles.css     # スタイル
docs/
	app-overview.md  # 仕様や内部の詳細ドキュメント
```

詳細は `docs/app-overview.md` にまとまっています。

---

## 技術スタック / データソース

- 地図表示: Leaflet + OpenStreetMap タイル
- 天気データ: Open‑Meteo API（無料・API キー不要・CORS 対応）
- 位置情報: ブラウザ Geolocation API
- 逆ジオコーディング: Open‑Meteo Geocoding → フォールバックとして Nominatim（OpenStreetMap）

帰属（Attribution）

- 地図タイル: © OpenStreetMap contributors
- 天気データ: © Open‑Meteo（利用規約に従う）

---

## デプロイ（任意）

静的サイトのため、任意のホスティングにそのまま配置可能です。

- GitHub Pages: Pages のソースを「main / `/app`」に設定
- Netlify / Vercel: `app/` を公開ディレクトリとして指定

HTTPS で配信されると現在地機能が有効になります。

---

## トラブルシューティング / よくある質問

- 現在地が取得できない
  - HTTPS か localhost でアクセスしているか確認
  - ブラウザの位置情報許可をオンにする
- 予報/地名が表示されない
  - 一時的な API 障害やレート制限の可能性 → 少し時間を置いて再試行
  - ネットワーク状態の確認
- CORS エラーが出る
  - 企業プロキシや拡張機能が影響していないか確認

---

## プライバシーについて

本アプリはサーバーを持たない静的サイトです。現在地の座標はブラウザから直接、天気/逆ジオコーディング用の外部 API へ送られますが、アプリ側サーバーに保存されることはありません。

---

## ライセンス

MIT License

---

## 貢献方法

バグ報告や改善提案、PR 大歓迎です。小さな修正でもお気軽にどうぞ！
